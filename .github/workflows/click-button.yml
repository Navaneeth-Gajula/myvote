name: Setup Selenium Environment

on:
  push:
    branches:
      - main

jobs:
  setup:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y wget unzip

    - name: Install Google Chrome
      run: |
        wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
        sudo dpkg -i google-chrome-stable_current_amd64.deb
        sudo apt-get install -f

    - name: Get Chrome version
      run: |
        chrome_version=$(google-chrome-stable --version | awk '{print $3}' | cut -d'.' -f1,2)
        echo "Chrome version: $chrome_version"

    - name: Download ChromeDriver
      run: |
        wget https://chromedriver.storage.googleapis.com/$(wget -qO- https://chromedriver.storage.googleapis.com/LATEST_RELEASE_${chrome_version})/chromedriver_linux64.zip

    - name: Install ChromeDriver
      run: |
        unzip chromedriver_linux64.zip
        sudo mv chromedriver /usr/local/bin/

    - name: Verify Installation
      run: |
        chromedriver --version
        google-chrome-stable --version
